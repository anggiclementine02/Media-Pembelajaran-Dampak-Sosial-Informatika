<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cyberbullying Awareness - Dampak Sosial Informatika</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: #113F67;
      color: #1c1c1c;
      line-height: 1.6;
      overflow-x: hidden;
      position: relative;
    }

    canvas#stars {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      display: block;
      z-index: 0;
    }

    .overlay {
      position: fixed;
      inset: 0;
      z-index: 0;
      background: radial-gradient(circle at 50% 50%, rgba(253, 245, 170, 0.03), transparent 50%);
    }

    header {
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      color: white;
      padding: 20px 50px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      animation: slideDown 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes slideDown {
      from {
        transform: translateY(-100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    header h1 {
      font-size: 1.8em;
      font-weight: 700;
      letter-spacing: -0.5px;
      background: linear-gradient(135deg, #FDF5AA 0%, #ffffff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .home-btn {
      background: rgba(253, 245, 170, 0.2);
      color: #ffffff;
      border: 1px solid rgba(253, 245, 170, 0.3);
      border-radius: 50px;
      padding: 10px 20px;
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9em;
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
    }

    .home-btn:hover {
      background: rgba(253, 245, 170, 0.3);
      border-color: rgba(253, 245, 170, 0.5);
      transform: translateY(-2px);
    }

    .content {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 40px 20px 100px;
      position: relative;
      z-index: 1;
    }

    .section-header {
      text-align: center;
      margin-bottom: 60px;
      animation: fadeIn 1s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .section-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(253, 245, 170, 0.15);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(253, 245, 170, 0.3);
      padding: 10px 20px;
      border-radius: 50px;
      color: #FDF5AA;
      font-size: 1.2em;
      font-weight: 500;
      margin-bottom: 20px;
    }

    .section-header h2 {
      font-size: 3em;
      font-weight: 800;
      line-height: 1.1;
      color: #ffffff;
      margin-bottom: 15px;
      letter-spacing: -2px;
    }

    .section-header .gradient-text {
      background: linear-gradient(135deg, #FDF5AA 0%, #ffffff 50%, #FDF5AA 100%);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: shimmer 3s linear infinite;
    }

    @keyframes shimmer {
      0% { background-position: 0% center; }
      100% { background-position: 200% center; }
    }

    .section-header p {
      font-size: 1.2em;
      color: rgba(255, 255, 255, 0.7);
      max-width: 700px;
      margin: 0 auto;
    }

    .game-container {
      background: rgba(40, 65, 109, 0.8);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-radius: 30px;
      padding: 40px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      position: relative;
      overflow: hidden;
      max-width: 1000px;
      width: 100%;
      animation: fadeInScale 1s ease-out 0.3s both;
    }

    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .game-container::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(253, 245, 170, 0.08) 0%, transparent 70%);
      animation: rotate 20s linear infinite;
    }

    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Health Bar System */
    .health-system {
      position: relative;
      z-index: 1;
      margin-bottom: 30px;
    }

    .health-label {
      color: #FDF5AA;
      font-weight: 600;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.1em;
    }

    .health-bar-container {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 15px;
      height: 30px;
      overflow: hidden;
      border: 2px solid rgba(255, 255, 255, 0.2);
      position: relative;
    }

    .health-bar {
      height: 100%;
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: white;
      font-size: 0.9em;
      position: relative;
      overflow: hidden;
    }

    .health-bar::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      animation: shimmerHealth 2s infinite;
    }

    @keyframes shimmerHealth {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    .health-high { background: linear-gradient(90deg, #4CAF50, #81C784); }
    .health-medium { background: linear-gradient(90deg, #FFC107, #FFD54F); }
    .health-low { background: linear-gradient(90deg, #FF9800, #FFB74D); }
    .health-critical { background: linear-gradient(90deg, #F44336, #E57373); animation: pulse 1s infinite; }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    /* Score Display */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
      position: relative;
      z-index: 1;
    }

    .stat-item {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      padding: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .stat-label {
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9em;
      font-weight: 500;
    }

    .stat-value {
      font-size: 1.8em;
      font-weight: 700;
      color: #FDF5AA;
    }

    /* Story and Character System */
    .character-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 25px;
      border-left: 5px solid #FDF5AA;
      position: relative;
      z-index: 1;
    }

    .character-info {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 15px;
    }

    .character-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #FDF5AA, #f5e878);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
    }

    .character-details h3 {
      color: #FDF5AA;
      font-size: 1.3em;
      margin-bottom: 5px;
    }

    .character-role {
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9em;
    }

    .story-text {
      color: rgba(255, 255, 255, 0.9);
      line-height: 1.8;
      font-size: 1.05em;
    }

    .perspective-badge {
      display: inline-block;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.85em;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .badge-victim {
      background: rgba(244, 67, 54, 0.2);
      color: #F44336;
      border: 1px solid rgba(244, 67, 54, 0.4);
    }

    .badge-bystander {
      background: rgba(33, 150, 243, 0.2);
      color: #2196F3;
      border: 1px solid rgba(33, 150, 243, 0.4);
    }

    .badge-perpetrator {
      background: rgba(156, 39, 176, 0.2);
      color: #9C27B0;
      border: 1px solid rgba(156, 39, 176, 0.4);
    }

    /* Choice System */
    .question-box {
      background: rgba(253, 245, 170, 0.1);
      border: 2px solid rgba(253, 245, 170, 0.3);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 25px;
      position: relative;
      z-index: 1;
    }

    .question-text {
      color: #ffffff;
      font-size: 1.2em;
      font-weight: 600;
      text-align: center;
    }

    .choices-grid {
      display: grid;
      gap: 15px;
      margin-bottom: 20px;
      position: relative;
      z-index: 1;
    }

    .choice-card {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .choice-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(253, 245, 170, 0.2), transparent);
      transition: left 0.5s ease;
    }

    .choice-card:hover::before {
      left: 100%;
    }

    .choice-card:hover {
      border-color: rgba(253, 245, 170, 0.5);
      background: rgba(253, 245, 170, 0.1);
      transform: translateX(5px);
    }

    .choice-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .choice-icon {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1em;
      background: rgba(253, 245, 170, 0.2);
      color: #FDF5AA;
    }

    .choice-title {
      color: #FDF5AA;
      font-weight: 600;
      font-size: 1.1em;
    }

    .choice-description {
      color: rgba(255, 255, 255, 0.85);
      line-height: 1.6;
      font-size: 1em;
    }

    .choice-card.selected-positive {
      border-color: #4CAF50;
      background: rgba(76, 175, 80, 0.15);
      animation: correctAnim 0.5s;
    }

    .choice-card.selected-negative {
      border-color: #F44336;
      background: rgba(244, 67, 54, 0.15);
      animation: wrongAnim 0.5s;
    }

    .choice-card.selected-neutral {
      border-color: #FFC107;
      background: rgba(255, 193, 7, 0.15);
    }

    .choice-card.disabled {
      cursor: not-allowed;
      opacity: 0.5;
    }

    @keyframes correctAnim {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.03); }
    }

    @keyframes wrongAnim {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      75% { transform: translateX(8px); }
    }

    /* Consequence Display */
    .consequence-box {
      margin-top: 25px;
      padding: 25px;
      border-radius: 15px;
      display: none;
      animation: fadeInUp 0.5s;
      position: relative;
      z-index: 1;
      border-left: 5px solid;
    }

    .consequence-box.show { display: block; }

    .consequence-positive {
      background: rgba(76, 175, 80, 0.15);
      border-color: #4CAF50;
    }

    .consequence-negative {
      background: rgba(244, 67, 54, 0.15);
      border-color: #F44336;
    }

    .consequence-neutral {
      background: rgba(255, 193, 7, 0.15);
      border-color: #FFC107;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .consequence-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    .consequence-icon {
      font-size: 2em;
    }

    .consequence-title {
      font-size: 1.3em;
      font-weight: 700;
      color: #ffffff;
    }

    .consequence-text {
      color: rgba(255, 255, 255, 0.9);
      line-height: 1.8;
      font-size: 1.05em;
      margin-bottom: 15px;
    }

    .impact-stats {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
    }

    .impact-item {
      display: flex;
      align-items: center;
      gap: 8px;
      color: rgba(255, 255, 255, 0.9);
      font-weight: 600;
    }

    .impact-positive { color: #4CAF50; }
    .impact-negative { color: #F44336; }

    /* Educational Tip Box */
    .tip-box {
      background: rgba(33, 150, 243, 0.15);
      border: 2px solid rgba(33, 150, 243, 0.3);
      border-radius: 15px;
      padding: 20px;
      margin-top: 20px;
      position: relative;
      z-index: 1;
    }

    .tip-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .tip-icon {
      font-size: 1.5em;
      color: #2196F3;
    }

    .tip-title {
      color: #2196F3;
      font-weight: 700;
      font-size: 1.1em;
    }

    .tip-content {
      color: rgba(255, 255, 255, 0.9);
      line-height: 1.7;
    }

    /* Navigation Buttons */
    .nav-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 25px;
      position: relative;
      z-index: 1;
    }

    .btn {
      padding: 14px 30px;
      border-radius: 50px;
      font-family: 'Poppins', sans-serif;
      font-weight: 700;
      font-size: 1.05em;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      border: none;
      cursor: pointer;
      text-decoration: none;
    }

    .btn-primary {
      background: linear-gradient(135deg, #FDF5AA, #f5e878);
      color: #113F67;
    }

    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 40px rgba(253, 245, 170, 0.4);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: #ffffff;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.5);
    }

    .btn.hide { display: none; }

    /* Start Screen */
    .start-screen {
      text-align: center;
      position: relative;
      z-index: 1;
    }

    .start-screen h2 {
      color: #FDF5AA;
      font-size: 2.5em;
      margin-bottom: 20px;
    }

    .start-screen p {
      color: rgba(255, 255, 255, 0.9);
      line-height: 1.8;
      margin-bottom: 20px;
      font-size: 1.1em;
    }

    .warning-box {
      background: rgba(244, 67, 54, 0.15);
      border: 2px solid rgba(244, 67, 54, 0.3);
      border-radius: 15px;
      padding: 20px;
      margin: 25px 0;
    }

    .warning-box h3 {
      color: #F44336;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      justify-content: center;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 30px 0;
    }

    .feature-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      padding: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .feature-icon {
      font-size: 2em;
      margin-bottom: 10px;
    }

    .feature-title {
      color: #FDF5AA;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .feature-desc {
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9em;
    }

    /* Result Screen */
    .result-screen {
      text-align: center;
      display: none;
      position: relative;
      z-index: 1;
    }

    .result-screen.show { display: block; }

    .result-icon {
      font-size: 5em;
      margin-bottom: 20px;
      animation: bounceIn 1s;
    }

    @keyframes bounceIn {
      0% { transform: scale(0); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .result-title {
      font-size: 2.5em;
      font-weight: 700;
      color: #ffffff;
      margin-bottom: 20px;
    }

    .result-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .result-stat-card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      padding: 20px;
      border: 2px solid rgba(255, 255, 255, 0.1);
    }

    .result-stat-label {
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9em;
      margin-bottom: 10px;
    }

    .result-stat-value {
      font-size: 2.5em;
      font-weight: 700;
      color: #FDF5AA;
    }

    .result-message {
      background: rgba(253, 245, 170, 0.1);
      border: 2px solid rgba(253, 245, 170, 0.3);
      border-radius: 15px;
      padding: 25px;
      margin: 25px 0;
      color: rgba(255, 255, 255, 0.9);
      line-height: 1.8;
      font-size: 1.1em;
    }

    .achievements {
      margin: 30px 0;
    }

    .achievement-item {
      background: rgba(76, 175, 80, 0.15);
      border: 2px solid rgba(76, 175, 80, 0.3);
      border-radius: 15px;
      padding: 15px;
      margin: 10px 0;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .achievement-icon {
      font-size: 2em;
    }

    .achievement-text {
      color: rgba(255, 255, 255, 0.9);
      font-weight: 600;
    }

    footer {
      background: rgba(253, 245, 170, 0.95);
      backdrop-filter: blur(10px);
      text-align: center;
      padding: 30px;
      color: #113F67;
      position: relative;
      z-index: 1;
      border-top: 1px solid rgba(17, 63, 103, 0.1);
    }

    footer p {
      font-weight: 500;
      font-size: 0.95em;
    }

    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 0;
      pointer-events: none;
    }

    .particle {
      position: absolute;
      background: radial-gradient(circle, rgba(253, 245, 170, 0.8), transparent);
      border-radius: 50%;
      animation: float 15s infinite linear;
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) translateX(0) scale(0);
        opacity: 0;
      }
      10% {
        opacity: 1;
        transform: translateY(90vh) translateX(20px) scale(1);
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-10vh) translateX(100px) scale(0);
        opacity: 0;
      }
    }

    @media (max-width: 768px) {
      header {
        flex-direction: column;
        padding: 15px 25px;
        gap: 15px;
      }

      header h1 {
        font-size: 1.3em;
      }

      .section-header h2 {
        font-size: 2em;
      }

      .game-container {
        padding: 25px;
      }

      .stats-container {
        grid-template-columns: 1fr 1fr;
      }

      .features-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <canvas id="stars" aria-hidden="true"></canvas>
  <div class="overlay"></div>
  <div class="particles" id="particles"></div>

  <header>
    <h1>🛡️ Cyberbullying Awareness Game</h1>
    <a href="index.html" class="home-btn">
      <i class="fas fa-home"></i> Kembali ke Beranda
    </a>
  </header>

  <section class="content">
    <div class="section-header">
      <div class="section-badge">
        <i class="fas fa-shield-alt"></i>
        <span>Game Edukasi Interaktif</span>
      </div>
      
      <h2 class="gradient-text">Memahami Dampak Cyberbullying</h2>
      <p>Rasakan langsung konsekuensi dari setiap pilihan yang kamu buat dalam menghadapi cyberbullying. Setiap keputusan memiliki dampak nyata!</p>
    </div>

    <div class="game-container">
      <!-- Start Screen -->
      <div class="start-screen" id="startScreen">
        <h2>🎮 Selamat Datang di Cyberbullying Awareness Game</h2>
        
        <p>
          Game ini dirancang untuk membantumu memahami dampak cyberbullying dari berbagai perspektif - 
          sebagai korban, saksi, dan bahkan pelaku.
        </p>

        <div class="warning-box">
          <h3>
            <i class="fas fa-exclamation-triangle"></i>
            Peringatan Penting
          </h3>
          <p>Game ini mengandung tema sensitif tentang cyberbullying. Tujuannya adalah edukasi dan meningkatkan kesadaran tentang dampak perundungan online.</p>
        </div>

        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">👥</div>
            <div class="feature-title">Perspektif Ganda</div>
            <div class="feature-desc">Rasakan dari sudut pandang korban dan saksi</div>
          </div>
          <div class="feature-card">
            <div class="feature-icon">💔</div>
            <div class="feature-title">Dampak Nyata</div>
            <div class="feature-desc">Lihat konsekuensi dari setiap pilihan</div>
          </div>
          <div class="feature-card">
            <div class="feature-icon">🧠</div>
            <div class="feature-title">Kesehatan Mental</div>
            <div class="feature-desc">Monitor dampak emosional karakter</div>
          </div>
          <div class="feature-card">
            <div class="feature-icon">💡</div>
            <div class="feature-title">Edukasi Aktif</div>
            <div class="feature-desc">Pelajari cara mengatasi cyberbullying</div>
          </div>
        </div>

        <p style="color: #FDF5AA; font-weight: bold; font-size: 1.1em;">
          💡 Ingat: Pilihan kecil dapat membuat perbedaan besar dalam kehidupan seseorang!
        </p>

        <button class="btn btn-primary" onclick="startGame()" style="margin-top: 30px; font-size: 1.2em; padding: 16px 40px;">
          <i class="fas fa-play"></i> Mulai Game
        </button>
      </div>

      <!-- Game Screen -->
      <div class="game-screen" id="gameScreen" style="display: none;">
        <!-- Health System -->
        <div class="health-system">
          <div class="health-label">
            <i class="fas fa-heart"></i>
            <span>Kesehatan Mental: <span id="healthText">100%</span></span>
          </div>
          <div class="health-bar-container">
            <div class="health-bar health-high" id="healthBar">100%</div>
          </div>
        </div>

        <!-- Stats -->
        <div class="stats-container">
          <div class="stat-item">
            <div class="stat-label">Skenario</div>
            <div class="stat-value"><span id="currentScenario">1</span>/<span id="totalScenarios">10</span></div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Pilihan Positif</div>
            <div class="stat-value" id="positiveChoices">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Pilihan Negatif</div>
            <div class="stat-value" id="negativeChoices">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Bantuan Diberikan</div>
            <div class="stat-value" id="helpGiven">0</div>
          </div>
        </div>

        <!-- Character Card -->
        <div class="character-card" id="characterCard"></div>

        <!-- Question Box -->
        <div class="question-box">
          <div class="question-text" id="questionText"></div>
        </div>

        <!-- Choices -->
        <div class="choices-grid" id="choicesContainer"></div>

        <!-- Consequence Box -->
        <div class="consequence-box" id="consequenceBox"></div>

        <!-- Educational Tip -->
        <div class="tip-box" id="tipBox" style="display: none;"></div>

        <!-- Navigation -->
        <div class="nav-buttons">
          <button class="btn btn-primary hide" id="nextBtn" onclick="nextScenario()">
            Lanjut ke Skenario Berikutnya <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <!-- Result Screen -->
      <div class="result-screen" id="resultScreen"></div>
    </div>
  </section>

  <footer>
    <p>© 2025 Media Pembelajaran Informatika | Dibuat oleh Anggi Clementine (237111039)</p>
  </footer>

  <script>
    // Game Data
    const scenarios = [
      {
        id: 1,
        perspective: 'victim',
        character: {
          name: 'Sarah',
          role: 'Korban Cyberbullying',
          avatar: '😢',
          mentalHealth: 100
        },
        story: 'Sarah baru saja memposting foto kelulusannya di Instagram. Dalam beberapa menit, ia menerima komentar-komentar jahat yang mengejek penampilannya. Komentar tersebut datang dari akun-akun anonim.',
        question: 'Apa yang sebaiknya Sarah lakukan?',
        choices: [
          {
            id: 'a',
            icon: '🗑️',
            title: 'Menghapus Postingan',
            description: 'Sarah menghapus foto dan menutup akunnya untuk sementara',
            type: 'neutral',
            healthImpact: -10,
            consequence: {
              title: 'Menghindari Masalah',
              text: 'Sarah merasa lega sementara, tapi masalah tidak terselesaikan. Pelaku masih bebas dan Sarah kehilangan kepercayaan diri untuk berkarya di media sosial.',
              impacts: ['Kesehatan Mental: -10%', 'Kepercayaan Diri: Menurun']
            },
            tip: 'Menghapus postingan mungkin memberikan kelegaan sementara, tetapi tidak menyelesaikan akar masalah. Penting untuk mengambil tindakan yang lebih konstruktif.'
          },
          {
            id: 'b',
            icon: '🛡️',
            title: 'Melaporkan & Memblokir',
            description: 'Sarah melaporkan komentar jahat ke Instagram dan memblokir akun-akun tersebut',
            type: 'positive',
            healthImpact: 5,
            consequence: {
              title: 'Tindakan Tepat!',
              text: 'Sarah mengambil kendali situasi dengan melaporkan pelanggaran. Platform media sosial akan meninjau laporan dan mengambil tindakan terhadap akun yang melanggar. Sarah juga merasa diberdayakan karena melawan bullying.',
              impacts: ['Kesehatan Mental: +5%', 'Pemberdayaan Diri: Meningkat', 'Akun Pelaku: Ditinjau']
            },
            tip: 'Melaporkan dan memblokir adalah langkah pertama yang tepat. Setiap platform media sosial memiliki kebijakan anti-bullying dan akan menindak akun yang melanggar.'
          },
          {
            id: 'c',
            icon: '👨‍👩‍👧',
            title: 'Cerita ke Orang Tua/Guru',
            description: 'Sarah menceritakan pengalamannya kepada orang tua atau guru yang dipercaya',
            type: 'positive',
            healthImpact: 10,
            consequence: {
              title: 'Mencari Dukungan!',
              text: 'Sarah mendapat dukungan emosional dan bimbingan dari orang dewasa. Mereka membantu Sarah melaporkan insiden ini dan memberikan strategi untuk menghadapi situasi serupa di masa depan.',
              impacts: ['Kesehatan Mental: +10%', 'Dukungan Sosial: Meningkat', 'Solusi Jangka Panjang: Ditemukan']
            },
            tip: 'Berbicara dengan orang dewasa yang dipercaya adalah langkah penting. Mereka dapat memberikan perspektif, dukungan emosional, dan bantuan praktis.'
          },
          {
            id: 'd',
            icon: '💢',
            title: 'Membalas Komentar',
            description: 'Sarah membalas dengan komentar kasar untuk membela diri',
            type: 'negative',
            healthImpact: -20,
            consequence: {
              title: 'Situasi Memburuk!',
              text: 'Balasan Sarah memicu perang komentar yang lebih intens. Lebih banyak orang terlibat dan situasi menjadi viral dengan cara yang negatif. Sarah merasa semakin tertekan dan kehilangan kendali.',
              impacts: ['Kesehatan Mental: -20%', 'Konflik: Meningkat', 'Reputasi: Terpengaruh Negatif']
            },
            tip: 'Membalas dengan emosi tidak akan menyelesaikan masalah. Justru dapat memperburuk situasi dan membuat Anda terlihat sama dengan pelaku bullying.'
          }
        ]
      },
      {
        id: 2,
        perspective: 'bystander',
        character: {
          name: 'Andi',
          role: 'Saksi/Teman Sarah',
          avatar: '🤔',
          mentalHealth: 100
        },
        story: 'Andi melihat komentar-komentar jahat yang ditujukan kepada Sarah di postingannya. Andi adalah teman Sarah dan tahu bahwa Sarah pasti terluka dengan komentar-komentar tersebut.',
        question: 'Apa yang sebaiknya Andi lakukan sebagai saksi?',
        choices: [
          {
            id: 'a',
            icon: '🙈',
            title: 'Tidak Melakukan Apa-apa',
            description: 'Andi memilih untuk tidak ikut campur dan scroll terus',
            type: 'negative',
            healthImpact: -5,
            consequence: {
              title: 'Diam Sama dengan Membiarkan',
              text: 'Dengan tidak berbuat apa-apa, Andi secara tidak langsung membiarkan bullying terjadi. Sarah merasa sendirian dan tidak didukung oleh teman-temannya. Andi juga merasa bersalah karena tidak membantu.',
              impacts: ['Kesehatan Mental Andi: -5%', 'Persahabatan: Melemah', 'Sarah: Merasa Sendirian']
            },
            tip: 'Sebagai bystander, keheningan Anda dapat diartikan sebagai persetujuan. Tindakan kecil dari saksi dapat membuat perbedaan besar bagi korban.'
          },
          {
            id: 'b',
            icon: '💬',
            title: 'Memberi Dukungan ke Sarah',
            description: 'Andi mengirim pesan pribadi ke Sarah untuk menyemangati',
            type: 'positive',
            healthImpact: 10,
            consequence: {
              title: 'Dukungan Pribadi yang Berarti!',
              text: 'Sarah merasa tidak sendirian dan dihargai oleh temannya. Dukungan emosional dari Andi membantu Sarah menghadapi situasi dengan lebih kuat. Persahabatan mereka menjadi lebih erat.',
              impacts: ['Kesehatan Mental Andi: +10%', 'Sarah: Merasa Didukung', 'Persahabatan: Menguat']
            },
            tip: 'Dukungan pribadi sangat berarti bagi korban cyberbullying. Pesan sederhana seperti "Aku di sini untukmu" dapat membuat perbedaan besar.'
          },
          {
            id: 'c',
            icon: '📢',
            title: 'Membela Sarah Secara Publik',
            description: 'Andi menulis komentar membela Sarah dan melaporkan komentar jahat',
            type: 'positive',
            healthImpact: 15,
            consequence: {
              title: 'Upstander yang Berani!',
              text: 'Andi mengambil posisi tegas melawan bullying. Tindakannya menginspirasi teman-teman lain untuk ikut membela Sarah. Pelaku bullying menjadi malu dan berhenti. Sarah merasa sangat dihargai dan tidak sendirian.',
              impacts: ['Kesehatan Mental Andi: +15%', 'Sarah: Sangat Terbantu', 'Pelaku: Mundur', 'Teman Lain: Terinspirasi']
            },
            tip: 'Menjadi "upstander" (bukan "bystander") dengan membela korban secara publik dapat menghentikan bullying. Pelaku seringkali mundur ketika ada orang yang berani melawan.'
          },
          {
            id: 'd',
            icon: '😈',
            title: 'Ikut Berkomentar Negatif',
            description: 'Andi ikut-ikutan menulis komentar mengejek karena peer pressure',
            type: 'negative',
            healthImpact: -25,
            consequence: {
              title: 'Menjadi Bagian dari Masalah!',
              text: 'Andi menjadi bagian dari pelaku bullying. Sarah merasa dikhianati oleh temannya sendiri dan sangat terluka. Andi juga merasa bersalah dan malu atas tindakannya. Persahabatan mereka hancur.',
              impacts: ['Kesehatan Mental Andi: -25%', 'Sarah: Sangat Terluka', 'Persahabatan: Hancur', 'Reputasi Andi: Rusak']
            },
            tip: 'Peer pressure bukan alasan untuk melakukan bullying. Ikut serta dalam bullying membuat Anda sama bertanggung jawab atas luka yang ditimbulkan pada korban.'
          }
        ]
      },
      {
        id: 3,
        perspective: 'victim',
        character: {
          name: 'Budi',
          role: 'Korban Penyebaran Informasi Palsu',
          avatar: '😰',
          mentalHealth: 100
        },
        story: 'Seseorang membuat akun palsu menggunakan foto Budi dan mengirim pesan meminta uang kepada teman-teman Budi. Teman-teman mulai menghubungi Budi dengan marah dan curiga.',
        question: 'Bagaimana Budi harus merespons situasi ini?',
        choices: [
          {
            id: 'a',
            icon: '📱',
            title: 'Klarifikasi di Media Sosial',
            description: 'Budi membuat postingan menjelaskan bahwa ada akun palsu yang menyalahgunakan identitasnya',
            type: 'positive',
            healthImpact: 5,
            consequence: {
              title: 'Transparansi yang Baik!',
              text: 'Teman-teman Budi memahami situasi setelah membaca klarifikasi. Mereka menjadi waspada dan tidak tertipu oleh akun palsu. Budi juga mendapat dukungan dari lingkaran pertemanannya.',
              impacts: ['Kesehatan Mental: +5%', 'Reputasi: Terjaga', 'Teman: Memahami Situasi']
            },
            tip: 'Klarifikasi cepat dan transparan penting untuk mencegah kesalahpahaman. Informasikan kepada semua orang yang mungkin terpengaruh.'
          },
          {
            id: 'b',
            icon: '🚨',
            title: 'Laporkan ke Platform & Polisi',
            description: 'Budi melaporkan akun palsu ke media sosial dan membuat laporan polisi tentang pencurian identitas',
            type: 'positive',
            healthImpact: 15,
            consequence: {
              title: 'Tindakan Hukum yang Tepat!',
              text: 'Akun palsu diblokir oleh platform. Laporan polisi menciptakan jejak hukum yang dapat digunakan jika kasus berlanjut. Budi merasa diberdayakan karena mengambil tindakan serius. Pelaku dapat dilacak dan diberi sanksi.',
              impacts: ['Kesehatan Mental: +15%', 'Akun Palsu: Diblokir', 'Perlindungan Hukum: Aktif', 'Efek Jera: Tercipta']
            },
            tip: 'Pencurian identitas adalah tindak pidana yang dapat dilaporkan. Jangan ragu untuk melibatkan pihak berwenang dalam kasus serius seperti ini.'
          },
          {
            id: 'c',
            icon: '😔',
            title: 'Menghapus Semua Akun',
            description: 'Budi merasa malu dan menghapus semua akun media sosialnya',
            type: 'neutral',
            healthImpact: -15,
            consequence: {
              title: 'Melarikan Diri dari Masalah',
              text: 'Dengan menghapus akun, Budi kehilangan kontrol atas situasi. Akun palsu masih aktif dan terus menipu orang lain. Budi merasa terasing dari lingkaran sosialnya dan masalah tidak terselesaikan.',
              impacts: ['Kesehatan Mental: -15%', 'Isolasi Sosial: Meningkat', 'Masalah: Tidak Terselesaikan']
            },
            tip: 'Menghilang dari media sosial bukan solusi. Ini justru memberikan kemenangan kepada pelaku dan meninggalkan masalah yang belum terselesaikan.'
          },
          {
            id: 'd',
            icon: '😡',
            title: 'Mencari & Mengancam Pelaku',
            description: 'Budi mencoba mencari tahu siapa pelakunya dan mengancam untuk membalas',
            type: 'negative',
            healthImpact: -20,
            consequence: {
              title: 'Kekerasan Bukan Solusi!',
              text: 'Ancaman Budi dapat digunakan oleh pelaku untuk membuat laporan balik. Budi bisa terjerat masalah hukum karena ancaman yang dibuatnya. Situasi menjadi lebih rumit dan Budi kehilangan posisi sebagai korban.',
              impacts: ['Kesehatan Mental: -20%', 'Risiko Hukum: Tinggi', 'Reputasi: Rusak']
            },
            tip: 'Jangan mengambil hukum ke tangan sendiri. Biarkan pihak berwenang menangani pelaku dengan cara yang legal dan tepat.'
          }
        ]
      },
      {
        id: 4,
        perspective: 'bystander',
        character: {
          name: 'Maya',
          role: 'Anggota Grup Chat',
          avatar: '😟',
          mentalHealth: 100
        },
        story: 'Di grup WhatsApp kelas, beberapa siswa membuat grup terpisah khusus untuk mengejek dan membicarakan kejelekan seorang teman sekelas. Maya diundang ke grup tersebut.',
        question: 'Apa yang harus Maya lakukan?',
        choices: [
          {
            id: 'a',
            icon: '🚪',
            title: 'Keluar dari Grup',
            description: 'Maya langsung keluar dari grup tanpa berkomentar',
            type: 'neutral',
            healthImpact: 0,
            consequence: {
              title: 'Menghindari Keterlibatan',
              text: 'Maya tidak terlibat langsung, tapi juga tidak melakukan apa-apa untuk menghentikan bullying. Grup masih berlanjut dan korban terus dirundung. Maya merasa tidak nyaman tapi tidak berdampak banyak.',
              impacts: ['Kesehatan Mental: 0%', 'Bullying: Berlanjut', 'Dampak: Minimal']
            },
            tip: 'Keluar dari grup adalah langkah pertama yang baik, tapi tidak cukup. Pertimbangkan untuk mengambil tindakan lebih lanjut.'
          },
          {
            id: 'b',
            icon: '📣',
            title: 'Menegur & Keluar',
            description: 'Maya menegur anggota grup bahwa tindakan mereka salah, lalu keluar',
            type: 'positive',
            healthImpact: 10,
            consequence: {
              title: 'Berani Menyuarakan Kebenaran!',
              text: 'Teguran Maya membuat beberapa anggota grup merasa malu dan sadar akan kesalahan mereka. Beberapa orang lain juga ikut keluar. Intensitas bullying berkurang karena ada yang berani melawan.',
              impacts: ['Kesehatan Mental: +10%', 'Kesadaran Teman: Meningkat', 'Bullying: Berkurang']
            },
            tip: 'Menyuarakan pendapat bahwa bullying itu salah dapat mempengaruhi orang lain untuk berpikir ulang tentang tindakan mereka.'
          },
          {
            id: 'c',
            icon: '👨‍🏫',
            title: 'Laporkan ke Guru/Orang Tua',
            description: 'Maya menyimpan bukti chat dan melaporkan kejadian ini ke guru atau orang tua',
            type: 'positive',
            healthImpact: 15,
            consequence: {
              title: 'Melibatkan Pihak Berwenang!',
              text: 'Guru mengambil tindakan serius. Anggota grup dipanggil dan diberi konseling. Korban mendapat dukungan dan perlindungan. Maya dihormati karena keberanian melaporkan, meski awalnya ada yang tidak suka.',
              impacts: ['Kesehatan Mental: +15%', 'Bullying: Dihentikan', 'Korban: Dilindungi', 'Pelaku: Diberi Konsekuensi']
            },
            tip: 'Melaporkan bullying ke orang dewasa yang berwenang adalah tindakan bertanggung jawab. Ini bukan "mengadu", tapi melindungi korban dan membantu pelaku belajar dari kesalahan.'
          },
          {
            id: 'd',
            icon: '😈',
            title: 'Ikut Aktif di Grup',
            description: 'Maya ikut berkomentar dan menertawakan korban',
            type: 'negative',
            healthImpact: -30,
            consequence: {
              title: 'Menjadi Pelaku Bullying!',
              text: 'Maya menjadi bagian dari pelaku bullying. Korban sangat terluka dan dampak psikologisnya parah. Maya juga dapat menghadapi konsekuensi jika bullying terungkap. Rasa bersalah akan menghantuinya.',
              impacts: ['Kesehatan Mental: -30%', 'Korban: Sangat Terluka', 'Tanggung Jawab Hukum: Ada', 'Rasa Bersalah: Tinggi']
            },
            tip: 'Berpartisipasi dalam grup chat yang menjelek-jelekkan orang lain adalah bentuk cyberbullying. Setiap anggota grup bertanggung jawab atas luka yang ditimbulkan.'
          }
        ]
      },
      {
        id: 5,
        perspective: 'victim',
        character: {
          name: 'Rina',
          role: 'Korban Pelecehan Online',
          avatar: '😣',
          mentalHealth: 100
        },
        story: 'Saat bermain game online, Rina dipaksa oleh pemain lain untuk video call dan mengirim foto pribadi dengan ancaman akan di-hack dan di-doxxing (menyebarkan informasi pribadinya).',
        question: 'Apa yang harus Rina lakukan menghadapi ancaman ini?',
        choices: [
          {
            id: 'a',
            icon: '❌',
            title: 'Menolak Tegas',
            description: 'Rina menolak dengan tegas dan langsung memblokir pemain tersebut',
            type: 'positive',
            healthImpact: 10,
            consequence: {
              title: 'Batasan yang Jelas!',
              text: 'Rina menunjukkan bahwa dia tidak bisa diancam atau dipaksa. Pemain yang mengancam kehilangan akses kepada Rina. Meskipun merasa ketakutan, Rina bangga pada dirinya sendiri karena mempertahankan batasannya.',
              impacts: ['Kesehatan Mental: +10%', 'Pemberdayaan Diri: Meningkat', 'Pelecehan: Dihentikan']
            },
            tip: 'Tidak ada yang berhak memaksa Anda melakukan sesuatu yang tidak nyaman. Mengatakan "tidak" dengan tegas adalah hak Anda.'
          },
          {
            id: 'b',
            icon: '🚨',
            title: 'Laporkan & Simpan Bukti',
            description: 'Rina screenshot percakapan, laporkan ke platform game dan ke orang tua',
            type: 'positive',
            healthImpact: 20,
            consequence: {
              title: 'Tindakan Tepat dan Aman!',
              text: 'Bukti yang dikumpulkan Rina sangat berguna untuk pelaporan. Platform game memblokir akun pelaku. Orang tua Rina memberikan dukungan dan melindunginya. Jika perlu, bukti ini bisa digunakan untuk laporan polisi.',
              impacts: ['Kesehatan Mental: +20%', 'Pelaku: Diblokir', 'Dukungan Keluarga: Kuat', 'Perlindungan: Maksimal']
            },
            tip: 'Selalu simpan bukti saat menghadapi pelecehan atau ancaman online. Screenshot, rekam percakapan, dan laporkan segera.'
          },
          {
            id: 'c',
            icon: '😨',
            title: 'Mengikuti Permintaan',
            description: 'Rina takut dan mengikuti permintaan pelaku',
            type: 'negative',
            healthImpact: -40,
            consequence: {
              title: 'Siklus Pelecehan Berlanjut!',
              text: 'Pelaku tidak berhenti setelah permintaan pertama dipenuhi. Justru ancaman menjadi lebih berat karena pelaku memiliki "bahan" untuk memeras Rina lebih lanjut. Rina terjebak dalam siklus pelecehan yang semakin parah dan traumatis.',
              impacts: ['Kesehatan Mental: -40%', 'Pemerasan: Berlanjut', 'Trauma: Parah', 'Risiko: Meningkat Tajam']
            },
            tip: 'JANGAN PERNAH mengikuti permintaan pelaku! Ini hanya membuat situasi lebih buruk. Pelaku akan terus memeras korbannya. Segera minta bantuan orang dewasa.'
          },
          {
            id: 'd',
            icon: '🤐',
            title: 'Diam & Tidak Cerita',
            description: 'Rina menyimpan masalah sendiri karena malu',
            type: 'negative',
            healthImpact: -25,
            consequence: {
              title: 'Isolasi dan Ketakutan',
              text: 'Rina hidup dalam ketakutan konstan bahwa ancaman akan terlaksana. Stress dan anxietas meningkat drastis. Tanpa dukungan, Rina mengalami penurunan kesehatan mental yang signifikan. Pelaku terus menguntit dan mengancam.',
              impacts: ['Kesehatan Mental: -25%', 'Anxietas: Tinggi', 'Isolasi: Parah', 'Pelaku: Terus Mengganggu']
            },
            tip: 'Menyimpan masalah pelecehan sendirian sangat berbahaya bagi kesehatan mental. Jangan malu untuk meminta bantuan - ini bukan salah Anda!'
          }
        ]
      }
    ];

    // Game State
    let currentScenarioIndex = 0;
    let gameState = {
      mentalHealth: 100,
      positiveChoices: 0,
      negativeChoices: 0,
      helpGiven: 0,
      scenariosCompleted: 0
    };

    // Initialize particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = 15;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        
        const size = Math.random() * 6 + 3;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.animationDelay = `${Math.random() * 15}s`;
        particle.style.animationDuration = `${Math.random() * 10 + 15}s`;
        
        particlesContainer.appendChild(particle);
      }
    }

    // Start Game
    function startGame() {
      document.getElementById('startScreen').style.display = 'none';
      document.getElementById('gameScreen').style.display = 'block';
      document.getElementById('totalScenarios').textContent = scenarios.length;
      loadScenario();
    }

    // Load Scenario
    function loadScenario() {
      if (currentScenarioIndex >= scenarios.length) {
        showResults();
        return;
      }

      const scenario = scenarios[currentScenarioIndex];
      
      // Update stats
      document.getElementById('currentScenario').textContent = currentScenarioIndex + 1;
      document.getElementById('positiveChoices').textContent = gameState.positiveChoices;
      document.getElementById('negativeChoices').textContent = gameState.negativeChoices;
      document.getElementById('helpGiven').textContent = gameState.helpGiven;
      
      // Update character card
      const characterCard = document.getElementById('characterCard');
      const perspectiveBadgeClass = `badge-${scenario.perspective}`;
      const perspectiveText = scenario.perspective === 'victim' ? '🎭 Perspektif: Korban' : 
                               scenario.perspective === 'bystander' ? '👥 Perspektif: Saksi' : 
                               '⚠️ Perspektif: Pelaku';
      
      characterCard.innerHTML = `
        <div class="perspective-badge ${perspectiveBadgeClass}">${perspectiveText}</div>
        <div class="character-info">
          <div class="character-avatar">${scenario.character.avatar}</div>
          <div class="character-details">
            <h3>${scenario.character.name}</h3>
            <div class="character-role">${scenario.character.role}</div>
          </div>
        </div>
        <div class="story-text">${scenario.story}</div>
      `;
      
      // Update question
      document.getElementById('questionText').textContent = scenario.question;
      
      // Load choices
      const choicesContainer = document.getElementById('choicesContainer');
      choicesContainer.innerHTML = '';
      
      scenario.choices.forEach(choice => {
        const choiceCard = document.createElement('div');
        choiceCard.className = 'choice-card';
        choiceCard.innerHTML = `
          <div class="choice-header">
            <div class="choice-icon">${choice.icon}</div>
            <div class="choice-title">${choice.title}</div>
          </div>
          <div class="choice-description">${choice.description}</div>
        `;
        choiceCard.onclick = () => selectChoice(choice);
        choicesContainer.appendChild(choiceCard);
      });
      
      // Hide consequence and tip boxes
      document.getElementById('consequenceBox').classList.remove('show');
      document.getElementById('tipBox').style.display = 'none';
      document.getElementById('nextBtn').classList.add('hide');
    }

    // Select Choice
    function selectChoice(choice) {
      // Disable all choices
      const choiceCards = document.querySelectorAll('.choice-card');
      choiceCards.forEach(card => {
        card.classList.add('disabled');
        card.onclick = null;
      });
      
      // Highlight selected choice
      event.currentTarget.classList.add(`selected-${choice.type}`);
      
      // Update game state
      if (choice.type === 'positive') {
        gameState.positiveChoices++;
        if (scenarios[currentScenarioIndex].perspective === 'bystander') {
          gameState.helpGiven++;
        }
      } else if (choice.type === 'negative') {
        gameState.negativeChoices++;
      }
      
      // Update mental health
      gameState.mentalHealth = Math.max(0, Math.min(100, gameState.mentalHealth + choice.healthImpact));
      updateHealthBar();
      
      // Show consequence
      showConsequence(choice);
      
      // Show tip
      showTip(choice.tip);
      
      // Show next button
      document.getElementById('nextBtn').classList.remove('hide');
    }

    // Update Health Bar
    function updateHealthBar() {
      const healthBar = document.getElementById('healthBar');
      const healthText = document.getElementById('healthText');
      
      healthBar.style.width = `${gameState.mentalHealth}%`;
      healthText.textContent = `${Math.round(gameState.mentalHealth)}%`;
      healthBar.textContent = `${Math.round(gameState.mentalHealth)}%`;
      
      // Update health bar color
      healthBar.className = 'health-bar';
      if (gameState.mentalHealth >= 75) {
        healthBar.classList.add('health-high');
      } else if (gameState.mentalHealth >= 50) {
        healthBar.classList.add('health-medium');
      } else if (gameState.mentalHealth >= 25) {
        healthBar.classList.add('health-low');
      } else {
        healthBar.classList.add('health-critical');
      }
    }

    // Show Consequence
    function showConsequence(choice) {
      const consequenceBox = document.getElementById('consequenceBox');
      consequenceBox.className = `consequence-box consequence-${choice.type} show`;
      
      const icon = choice.type === 'positive' ? '✅' : 
                   choice.type === 'negative' ? '❌' : '⚠️';
      
      let impactsHTML = '';
      if (choice.consequence.impacts) {
        impactsHTML = '<div class="impact-stats">';
        choice.consequence.impacts.forEach(impact => {
          const isPositive = impact.includes('+') || impact.includes('Meningkat') || 
                            impact.includes('Kuat') || impact.includes('Terjaga');
          const impactClass = isPositive ? 'impact-positive' : 'impact-negative';
          const impactIcon = isPositive ? '📈' : '📉';
          impactsHTML += `<div class="impact-item ${impactClass}">${impactIcon} ${impact}</div>`;
        });
        impactsHTML += '</div>';
      }
      
      consequenceBox.innerHTML = `
        <div class="consequence-header">
          <div class="consequence-icon">${icon}</div>
          <div class="consequence-title">${choice.consequence.title}</div>
        </div>
        <div class="consequence-text">${choice.consequence.text}</div>
        ${impactsHTML}
      `;
    }

    // Show Tip
    function showTip(tipText) {
      const tipBox = document.getElementById('tipBox');
      tipBox.style.display = 'block';
      tipBox.innerHTML = `
        <div class="tip-header">
          <div class="tip-icon">💡</div>
          <div class="tip-title">Pelajaran Penting</div>
        </div>
        <div class="tip-content">${tipText}</div>
      `;
    }

    // Next Scenario
    function nextScenario() {
      currentScenarioIndex++;
      gameState.scenariosCompleted++;
      loadScenario();
    }

    // Show Results
    function showResults() {
      document.getElementById('gameScreen').style.display = 'none';
      const resultScreen = document.getElementById('resultScreen');
      resultScreen.classList.add('show');
      
      // Calculate score
      const positivePercentage = (gameState.positiveChoices / scenarios.length) * 100;
      
      // Determine result icon and message
      let resultIcon = '🏆';
      let resultTitle = 'Selamat!';
      let resultMessage = '';
      
      if (gameState.mentalHealth >= 80 && positivePercentage >= 80) {
        resultIcon = '🏆';
        resultTitle = 'Luar Biasa!';
        resultMessage = 'Kamu menunjukkan pemahaman yang sangat baik tentang cara mengatasi cyberbullying. Kamu tahu kapan harus melaporkan, kapan harus membela, dan kapan harus mencari bantuan. Teruslah menjadi digital citizen yang bertanggung jawab!';
      } else if (gameState.mentalHealth >= 60 && positivePercentage >= 60) {
        resultIcon = '⭐';
        resultTitle = 'Bagus!';
        resultMessage = 'Kamu membuat banyak keputusan yang tepat dalam menghadapi cyberbullying. Ada beberapa situasi yang bisa ditangani dengan lebih baik, tapi secara keseluruhan kamu sudah memahami konsep penting tentang keamanan digital dan empati.';
      } else if (gameState.mentalHealth >= 40) {
        resultIcon = '📚';
        resultTitle = 'Perlu Belajar Lebih';
        resultMessage = 'Beberapa keputusanmu masih perlu ditingkatkan. Ingat bahwa cyberbullying berdampak serius pada kesehatan mental korban. Cobalah lagi dan fokus pada empati, pelaporan yang tepat, dan mencari bantuan dari orang dewasa.';
      } else {
        resultIcon = '💔';
        resultTitle = 'Mari Coba Lagi';
        resultMessage = 'Keputusan yang kamu buat menunjukkan kurangnya pemahaman tentang dampak cyberbullying. Penting untuk selalu memikirkan perasaan orang lain dan dampak jangka panjang dari tindakan kita di dunia digital. Coba lagi dan pelajari setiap skenario dengan lebih cermat.';
      }
      
      // Build achievements
      let achievementsHTML = '';
      if (gameState.helpGiven >= 2) {
        achievementsHTML += `
          <div class="achievement-item">
            <div class="achievement-icon">🦸</div>
            <div class="achievement-text">Upstander Hero - Kamu membantu korban sebagai saksi!</div>
          </div>
        `;
      }
      if (gameState.mentalHealth >= 90) {
        achievementsHTML += `
          <div class="achievement-item">
            <div class="achievement-icon">💪</div>
            <div class="achievement-text">Mental Health Champion - Kesehatan mental terjaga dengan baik!</div>
          </div>
        `;
      }
      if (gameState.positiveChoices === scenarios.length) {
        achievementsHTML += `
          <div class="achievement-item">
            <div class="achievement-icon">🌟</div>
            <div class="achievement-text">Perfect Score - Semua pilihan positif!</div>
          </div>
        `;
      }
      
      resultScreen.innerHTML = `
        <div class="result-icon">${resultIcon}</div>
        <h2 class="result-title">${resultTitle}</h2>
        
        <div class="result-stats">
          <div class="result-stat-card">
            <div class="result-stat-label">Kesehatan Mental Akhir</div>
            <div class="result-stat-value">${Math.round(gameState.mentalHealth)}%</div>
          </div>
          <div class="result-stat-card">
            <div class="result-stat-label">Pilihan Positif</div>
            <div class="result-stat-value">${gameState.positiveChoices}/${scenarios.length}</div>
          </div>
          <div class="result-stat-card">
            <div class="result-stat-label">Bantuan Diberikan</div>
            <div class="result-stat-value">${gameState.helpGiven}</div>
          </div>
        </div>
        
        <div class="result-message">
          <p>${resultMessage}</p>
          <p style="margin-top: 15px; font-weight: bold; color: #FDF5AA;">
            💡 Ingat: Di dunia nyata, setiap tindakan kita berdampak. Jadilah bagian dari solusi, bukan bagian dari masalah!
          </p>
        </div>
        
        ${achievementsHTML ? `<div class="achievements"><h3 style="color: #FDF5AA; margin-bottom: 15px;">🏅 Pencapaian Kamu</h3>${achievementsHTML}</div>` : ''}
        
        <div class="nav-buttons">
          <button class="btn btn-primary" onclick="restartGame()">
            <i class="fas fa-redo"></i> Main Lagi
          </button>
          <a href="index.html" class="btn btn-secondary">
            <i class="fas fa-home"></i> Kembali ke Beranda
          </a>
        </div>
      `;
    }

    // Restart Game
    function restartGame() {
      currentScenarioIndex = 0;
      gameState = {
        mentalHealth: 100,
        positiveChoices: 0,
        negativeChoices: 0,
        helpGiven: 0,
        scenariosCompleted: 0
      };
      
      document.getElementById('resultScreen').classList.remove('show');
      document.getElementById('startScreen').style.display = 'block';
      updateHealthBar();
    }

    // Starfield animation
    (function () {
      const canvas = document.getElementById('stars');
      const ctx = canvas.getContext('2d');

      const STAR_COUNT = Math.floor((window.innerWidth * window.innerHeight) / 2000);
      const MAX_RADIUS = 2;
      const MIN_RADIUS = 0.4;
      const TWINKLE_SPEED = 0.02;

      let stars = [];
      let w = 0, h = 0, t = 0;

      function rand(min, max) { return Math.random() * (max - min) + min; }

      function makeStar() {
        return {
          x: Math.random(),
          y: Math.random(),
          r: rand(MIN_RADIUS, MAX_RADIUS),
          baseAlpha: rand(0.4, 1.0),
          twinklePhase: Math.random() * Math.PI * 2,
          twinkleSpeed: rand(TWINKLE_SPEED * 0.5, TWINKLE_SPEED * 1.5)
        };
      }

      function resize() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
      }

      function init() {
        resize();
        stars = [];
        for (let i = 0; i < STAR_COUNT; i++) {
          stars.push(makeStar());
        }
      }

      function animate() {
        t += 0.01;
        ctx.fillStyle = 'rgba(17, 63, 103, 0.1)';
        ctx.fillRect(0, 0, w, h);

        stars.forEach(star => {
          const twinkle = Math.sin(star.twinklePhase + t * star.twinkleSpeed) * 0.5 + 0.5;
          const alpha = star.baseAlpha * twinkle;
          
          ctx.beginPath();
          ctx.arc(star.x * w, star.y * h, star.r, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
          ctx.fill();
        });

        requestAnimationFrame(animate);
      }

      window.addEventListener('resize', init);
      init();
      animate();
    })();

    // Initialize
    window.onload = () => {
      createParticles();
      updateHealthBar();
    };
  </script>
</body>
</html>